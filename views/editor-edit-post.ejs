<a href="/editor" class="editorBackButton">&larr; Back</a>
<div class="admin-title">
  <h2>View / Edit Post</h2>

  <form action="/editor-delete-post/<%= data._id %>?_method=DELETE" method="POST">
    <input type="submit" value="Delete" class="btn-delete btn">
  </form>

</div>

<form action="/editor-edit-post/<%= data._id %>?_method=PUT" method="POST" enctype="multipart/form-data">

  <label for="title"><b>Title</b></label>
  <input type="text" placeholder="Post Title" name="title" value="<%= data.title %>">

<label for="body"><b>Content</b></label>
<textarea id="editor" name="body" cols="50" rows="10"><%= data.body %></textarea>


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jodit/build/jodit.min.css">
<script src="https://cdn.jsdelivr.net/npm/jodit/build/jodit.min.js"></script>
<script>
document.addEventListener("DOMContentLoaded", function () {
  const editor = new Jodit('#editor', {
    height: 400,
    buttons: [
        'bold', 'italic', 'underline', '|',
        'ul', 'ol', '|',
        'link', 'image','table','eraser','brush','justify','fontsize','fullsize','copyformat'
      ],
    uploader: {
      url: '/upload',
      insertImageAsBase64URI: false,
      format: 'json',

      process: function (resp) {
        if (resp && resp.success && resp.files && resp.files.length) {
          resp.files.forEach(file => {
            editor.selection.insertHTML(`<img src="${file}" style="max-width:50%; margin:5px 0;">`);
          });
          return {
            path: '',
            error: 0
          };
        }

        return { error: 1 };
      }
    },

    events: {
      afterUpload: function (data) {
        console.log('Jodit uploaded:', data);
      }
    }
  });
});
</script>


    <% if (data.image) { %>
    <p>Current Image:</p>
    <img src="<%= data.image %>" class="editorEditImage" alt="Blog Image" width="200px">
    <% } %>

  <!-- New image upload -->
  <label for="image"><b>New Image</b></label>
  <input type="file" name="image" accept="image/*">
<br>
<br>
  <label for="category"><b>Category</b></label>
  <select name="category" id="category">
    <option value="technology" <%= data.category === "technology" ? "selected" : "" %>>technology</option>
    <option value="AI" <%= data.category === "AI" ? "selected" : "" %>>AI</option>
    <option value="lifestyle" <%= data.category === "lifestyle" ? "selected" : "" %>>lifestyle</option>
    <option value="animal" <%= data.category === "animal" ? "selected" : "" %>>animal</option>
    <option value="food" <%= data.category === "food" ? "selected" : "" %>>food</option>
   <option value="travel" <%= data.category === "travel" ? "selected" : "" %>>travel</option>
  </select>

  <input type="submit" value="Update" class="btn">

</form>
